( function( $ ) {
	$( function() {
		var accordion = $( '.wp-block-sevanova-gutenberg-block-accordion' );

		// Open First
		accordion.each( function() {
			var currentAccordion = $( this );
			var accordionItem = currentAccordion.find( '.accordion__item' );
			var accordionLabel = currentAccordion.find( '.accordion__label' );
			var accordionBody = currentAccordion.find( '.accordion__body' );

			if ( currentAccordion.data( 'open-first' ) ) {
				$( this ).find( '.accordion__item .accordion__label' ).first().attr( 'aria-selected', 'true' );
				$( this ).find( '.accordion__item .accordion__body' ).first().attr( 'aria-hidden', 'false' );
			}

			// Click on label
			accordionLabel.on( 'click', function() {
				var that = $( this );

				// Check data-multiple
				if ( that.closest( currentAccordion ).data( 'multiple' ) ) {
					// Multiple
					if ( that.attr( 'aria-selected' ) === 'true' ) {
						that.attr( 'aria-selected', 'false' );
						that.closest( accordionItem ).find( accordionBody ).attr( 'aria-hidden', 'true' );
					} else {
						that.attr( 'aria-selected', 'true' );
						that.closest( accordionItem ).find( accordionBody ).attr( 'aria-hidden', 'false' );
					}
				} else if ( that.attr( 'aria-selected' ) === 'true' ) {
					// One
					that.attr( 'aria-selected', 'false' );
					that.closest( accordionItem ).find( accordionBody ).attr( 'aria-hidden', 'true' );
				} else {
					that.closest( currentAccordion ).find( accordionLabel ).attr( 'aria-selected', 'false' );
					that.closest( currentAccordion ).find( '.accordion__item .accordion__body' ).attr( 'aria-hidden', 'true' );
					that.attr( 'aria-selected', 'true' );
					that.closest( accordionItem ).find( accordionBody ).attr( 'aria-hidden', 'false' );
				}
			} );
		} );

	} );
}( jQuery ) );
